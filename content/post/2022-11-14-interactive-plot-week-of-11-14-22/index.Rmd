---
title: Interactive Plot, Week of 11/14/22
author: Daniel Sussman
date: '2022-11-14'
slug: []
categories: []
tags: []
description: ~
toc: yes
authors: []
series: []
lastmod: '2022-11-14T09:43:26-05:00'
featuredVideo: ~
featuredImage: ~
---

Today, we’ll build and deploy a very simple interactive in class and discuss what makes a good interactive.
For this weeks post, describe your thoughts and progress on the interactive for your final project. Think about the principals we talked about from last week the interactive should :

allow the user to both see the big picture trends and to “zoom in” on subsets or individual data points.

be interactive, it should be more than just static plots, allowing the user to provide input to explore the data,

guide the user, providing clear ways to use the interactive and highlighting interesting findings to start a user’s exploration,

if you can, be personal. Not all data will be conducive to this but if you allow a user to see information relevant to them specifically, it can help pull people in.

Discuss your ideas and, if you’ve made progress, provide a link to a draft of the interactive. Note, I’m requiring all groups to use Shiny this semester. The directions on the Big Picture page were not properly updated.

```{r, Hannah h}
library(tidyverse)
library(rvest)
library(tibble)
library(readxl)
library(leaflet)
library(dplyr)
library(readr)
library(googlesheets4)
<<<<<<< HEAD

load(here::here("dataset", "baseball.RData"))
=======
>>>>>>> 44be3bb6c20cf7ce5a12e0478c66085b451e2bb9


load(here::here("dataset", "baseball.RData"))

# Until I can solve out how to get the data via web-scraping, I j loaded it from data

#src <- read_html("https://docs.google.com/spreadsheets/d/1p0R5qqR7XjoRG2mR5E1D_trlygHSqMOUdMgMpzq0gjU/htmlview")
#(node <- src %>% html_node("table"))
#(html_nodes(src, "div diiv table") %>% html_text() %>% cat() %>% as_tibble())
#stad <- read_excel(here::here("dataset", "stadiums.xlsx"))

stadiums <- read_sheet("https://docs.google.com/spreadsheets/d/1p0R5qqR7XjoRG2mR5E1D_trlygHSqMOUdMgMpzq0gjU/htmlview")

MLBstadiums <- stadiums %>% filter(Sport == "MLB")
save(MLBstadiums, file = "dataset/MLBstadiums.Rdata")

stadiums$Abbreviation[stadiums$Abbreviation == 'CHC'] <- 'CHN'
stadiums$Abbreviation[stadiums$Abbreviation == 'CHW'] <- 'CHA'
stadiums$Abbreviation[stadiums$Abbreviation == 'KCR'] <- 'KCN'
stadiums$Abbreviation[stadiums$Abbreviation == 'LAA'] <- 'ANA'
stadiums$Abbreviation[stadiums$Abbreviation == 'LAD'] <- 'LAN'
stadiums$Abbreviation[stadiums$Abbreviation == 'MIA'] <- 'FLO'
stadiums$Abbreviation[stadiums$Abbreviation == 'NYM'] <- 'NYN'
stadiums$Abbreviation[stadiums$Abbreviation == 'NYY'] <- 'NYA'
stadiums$Abbreviation[stadiums$Abbreviation == 'SDP'] <- 'SDN'
stadiums$Abbreviation[stadiums$Abbreviation == 'SFG'] <- 'SFN'
stadiums$Abbreviation[stadiums$Abbreviation == 'STL'] <- 'SLN'
stadiums$Abbreviation[stadiums$Abbreviation == 'TBR'] <- 'TBA'


<<<<<<< HEAD
baseball_w_stadiums <- merge(baseball, stadiums, by.x=c("h_name"), 
                                                 by.y =("Abbreviation")) 
=======

#leaflet(baseball_w_stadiums) %>% 
  #    setView(lng = -98.5795, lat = 39.8283, zoom = 5) %>% 
  #    addTiles() %>% 
  #    addAwesomeMarkers(~Longitude, ~Latitude, label = ~as.character(h_name)) #%>%
      #addLegend(position = 'bottomleft', opacity = 1,title = 'Divisions')
>>>>>>> 44be3bb6c20cf7ce5a12e0478c66085b451e2bb9

mlbDivision <- function(x){
    
    if(x %in% c('Baltimore Orioles','Boston Red Sox','New York Yankees','Tampa Bay Rays','Toronto Blue Jays')){
        y <- 'AL East'
    } else if(x %in% c('Minnesota Twins','Cleveland Indians','Chicago White Sox','Detroit Tigers','Kansas City Royals')){
        y <- 'AL Central'
    } else if(x %in% c('Los Angeles Angels','Houston Astros','Seattle Mariners','Oakland Athletics','Texas Rangers')){
        y <- 'AL West'
    } else if(x %in% c('New York Mets','Philadelphia Phillies','Atlanta Braves','Washington Nationals','Miami Marlins')){
        y <- 'NL East'
    } else if(x %in% c('Pittsburgh Pirates','St. Louis Cardinals','Atlanta Braves','Chicago Cubs','Milwaukee Brewers','Cincinnati Reds')){
        y <- 'NL Central'
    } else {
        y <- 'NL West'
    }
    
    return(y)
}
  
makeColorsandNames <- data.frame(divisions = c('AL East','AL Central','AL West','NL East','NL Central','NL West'))

leaflet(stadiums) %>% 
      setView(lng = -98.5795, lat = 39.8283, zoom = 5) %>% 
      addTiles() %>% 
      addAwesomeMarkers(~Longitude, ~Latitude, label = ~as.character(Abbreviation)) %>% 
      addLegend(position = 'bottomleft',labels = makeColorsandNames[,1],opacity = 1,title = 'Divisions')


    
```
