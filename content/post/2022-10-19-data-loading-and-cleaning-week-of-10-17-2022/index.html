---
title: Data Loading and Cleaning, Week of 10/17/2022
author: Daniel Sussman
date: '2022-10-19'
slug: []
categories: []
tags: []
description: ~
toc: yes
authors: []
series: []
lastmod: '2022-10-19T09:38:50-04:00'
featuredVideo: ~
featuredImage: ~
---


<div id="TOC">

</div>

<p>Our data set of MLB game statistics is &gt;50mb and can be found in the dataset-ignore folder. After reading in the CSV file, we converted it into a tibble.</p>
<pre class="r"><code>source(
  here::here(&quot;static&quot;, &quot;load_and_clean_data.R&quot;),
  echo = TRUE
)</code></pre>
<pre><code>## 
## &gt; library(tidyverse)</code></pre>
<pre><code>## ── Attaching packages ─────────────────────────────────────── tidyverse 1.3.2 ──
## ✔ ggplot2 3.3.6      ✔ purrr   0.3.4 
## ✔ tibble  3.1.8      ✔ dplyr   1.0.10
## ✔ tidyr   1.2.0      ✔ stringr 1.4.1 
## ✔ readr   2.1.2      ✔ forcats 0.5.2 
## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
## ✖ dplyr::filter() masks stats::filter()
## ✖ dplyr::lag()    masks stats::lag()</code></pre>
<pre><code>## 
## &gt; loan_data &lt;- read_csv(here::here(&quot;dataset&quot;, &quot;loan_refusal.csv&quot;))</code></pre>
<pre><code>## Rows: 20 Columns: 5
## ── Column specification ────────────────────────────────────────────────────────
## Delimiter: &quot;,&quot;
## chr (1): bank
## dbl (4): min, white, himin, hiwhite
## 
## ℹ Use `spec()` to retrieve the full column specification for this data.
## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
<pre><code>## 
## &gt; loan_data_clean &lt;- loan_data
## 
## &gt; write_csv(loan_data_clean, file = here::here(&quot;dataset&quot;, 
## +     &quot;loan_refusal_clean.csv&quot;))
## 
## &gt; save(loan_data_clean, file = here::here(&quot;dataset/loan_refusal.RData&quot;))</code></pre>
<pre class="r"><code>library(tidyverse)

data &lt;- read_csv(here::here(&quot;dataset&quot;, &quot;dataset-ignore&quot;, &quot;game_logs.csv&quot;))</code></pre>
<pre><code>## Warning: One or more parsing issues, see `problems()` for details</code></pre>
<pre><code>## Rows: 171907 Columns: 161
## ── Column specification ────────────────────────────────────────────────────────
## Delimiter: &quot;,&quot;
## chr (75): day_of_week, v_name, v_league, h_name, h_league, day_night, protes...
## dbl (83): date, number_of_game, v_game_number, h_game_number, v_score, h_sco...
## lgl  (3): completion, forefeit, rf_umpire_id
## 
## ℹ Use `spec()` to retrieve the full column specification for this data.
## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
<pre class="r"><code>(baseball &lt;- as_tibble(data))</code></pre>
<pre><code>## # A tibble: 171,907 × 161
##       date numbe…¹ day_o…² v_name v_lea…³ v_gam…⁴ h_name h_lea…⁵ h_gam…⁶ v_score
##      &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;  &lt;chr&gt;     &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;     &lt;dbl&gt;   &lt;dbl&gt;
##  1  1.87e7       0 Thu     CL1    na            1 FW1    na            1       0
##  2  1.87e7       0 Fri     BS1    na            1 WS3    na            1      20
##  3  1.87e7       0 Sat     CL1    na            2 RC1    na            1      12
##  4  1.87e7       0 Mon     CL1    na            3 CH1    na            1      12
##  5  1.87e7       0 Tue     BS1    na            2 TRO    na            1       9
##  6  1.87e7       0 Thu     CH1    na            2 CL1    na            4      18
##  7  1.87e7       0 Sat     WS3    na            2 CL1    na            5      12
##  8  1.87e7       0 Sat     CH1    na            3 FW1    na            2      14
##  9  1.87e7       0 Mon     WS3    na            3 FW1    na            3       6
## 10  1.87e7       0 Tue     TRO    na            2 BS1    na            3      29
## # … with 171,897 more rows, 151 more variables: h_score &lt;dbl&gt;,
## #   length_outs &lt;dbl&gt;, day_night &lt;chr&gt;, completion &lt;lgl&gt;, forefeit &lt;lgl&gt;,
## #   protest &lt;chr&gt;, park_id &lt;chr&gt;, attendance &lt;dbl&gt;, length_minutes &lt;dbl&gt;,
## #   v_line_score &lt;chr&gt;, h_line_score &lt;chr&gt;, v_at_bats &lt;dbl&gt;, v_hits &lt;dbl&gt;,
## #   v_doubles &lt;dbl&gt;, v_triples &lt;dbl&gt;, v_homeruns &lt;dbl&gt;, v_rbi &lt;dbl&gt;,
## #   v_sacrifice_hits &lt;dbl&gt;, v_sacrifice_flies &lt;dbl&gt;, v_hit_by_pitch &lt;dbl&gt;,
## #   v_walks &lt;dbl&gt;, `v_intentional walks` &lt;dbl&gt;, v_strikeouts &lt;dbl&gt;, …</code></pre>
<p>This data set does not specify whether the home team wins or loses, but it does contain information on the home team’s and the away team’s number of runs. Since we are interested in seeing if a team wins or loses, we created a column in the dataset called score_diff, which takes the number of the visiting team’s runs subtracted from the number of the one team’s runs. A positive value represents a win, a negative value represents a loss, and a zero is a tie. The higher absolute values represent a bigger win/loss.</p>
<p>baseball %&gt;% group_by(h_name) %&gt;% mutate(score_diff=h_score-v_score)</p>
<p>Here, we grouped by home team since we will be considering wins and losses for specific teams at their respective stadiums.</p>
<p>The date in the data is inserted as an integer, so using separate, we separated the date into three columns: year, month, and day. If we need to combine these, we can easily do so later on using lubridate.</p>
<p>baseball %&gt;% separate(date,into=c(“year”,“month_day”),sep=4) %&gt;%
separate(month_day,into=c(“month”,“day”),sep=2)</p>
<p>Some filters we are considering are to filter by home team, and to filter for the years between 2000 and 2016.</p>
<p>baseball %&gt;% filter(h_name=“BOS”)</p>
<p>We filtered to select Boston Red Sox as the home team, since we have already found weather data for Boston and are considering taking this into account later on.</p>
<p>years&lt;-c(2000,2001,2002,20032004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016)))
baseball%&gt;%filter(year==years)</p>
<p>plots
mean scores?
day of week?
visiting team?</p>
<p>INSTRUCTIONS:</p>
<p>Discuss any initial steps you are taking to load and clean the data.
If you are working with a large data set, you might decide to start with a subset of the data. How did you choose this?
Are you starting by removing missing values or focusing on columns with less missing data.
Exploratory Data Analysis
Talk about your initial exploration of the data.
Give summary statistics and make plots about parts of the data that will be your focus. You might focus on just a few variables.
What are the big, obvious patterns in the data? Are these surprising?</p>
